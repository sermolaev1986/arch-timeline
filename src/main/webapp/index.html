<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="bootstrap/assets/ico/favicon.png">
    <title>ArchTimeline</title>
    <!-- Bootstrap core CSS -->
    <link href="bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="arch-timeline.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="bootstrap/assets/js/html5shiv.js"></script>
    <script src="bootstrap/assets/js/respond.min.js"></script>
    <![endif]-->
</head>
<div class="container">

    <div class="page-header">
        <h1>Архилиния
            <small>временная шкала архитектуры</small>
        </h1>
    </div>

    <div class="arch-area">

        <button type="button" class="btn btn-lg btn-primary" id="btnGetData">Получить данные</button>
        <button id="addBtn" type="button" class="btn btn-lg btn-info">Добавить запись</button>

        <p>

        <form action="events/create" method="POST" enctype="multipart/form-data">

            <div>
                <input type="text" name="title"/>
                Название
            </div>
            <div>
                <input type="text" name="description"/>
                Краткое описание
            </div>
            <div>
                <select size="1" name="tag">
                    <option disabled >Выберите метку</option>
                    <option value="t1">История русской архитектуры</option>
                    <option value="t2">История ландшафтной архитектуры</option>
                    <option value="t3">История зарубежной архитектуры</option>
                    <option value="t4">История градостроительства</option>
                </select>
                Метка
            </div>
            <div>
                <input type="date" name="date"/>
                Дата
            </div>
            <div>
                <input type="file" name="file"/>
            </div>

            <input type="submit">

        </form>
        </p>

        <table class="table table-striped hide arch-margin-top" id="dataTable">
            <thead>
            <tr>
                <th>Заголовок</th>
                <th>Дата</th>
            </tr>
            </thead>
            <tbody id="targetTableBody">
            </tbody>
        </table>
        <div class="alert alert-info hide arch-margin-top" id="wait">Подождите, идет загрузка...</div>
        <div id="timeline-container" class="arch-margin-top"></div>
    </div>

</div>

<script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.6.0.min.js"></script>
<script defer="defer">
    var container = document.getElementById("container");
    var cWidth = container.clientWidth;
    var cHeight = 100;
    var stage = new Kinetic.Stage({
        container: 'container',
        width: cWidth,
        height: cHeight + 10,
        draggable: true,
        dragBoundFunc: function(pos) {
            var rightBound = -5020 + cWidth;
            return {
                x: pos.x > 0 ? 0 : pos.x < rightBound ? rightBound : pos.x,
                y: this.getAbsolutePosition().y
            }
        }
    });

    var layer = new Kinetic.Layer();
    var gauge = new Kinetic.Shape({
        drawFunc: function(canvas) {
            var context = canvas.getContext();
            context.beginPath();
            for (i = 0; i < 1000; i++) {
                var step = 10   ;
                var x = 10 + i * step;
                context.moveTo(x, cHeight);
                if (i % 10 == 0) {
                    context.lineTo(x, cHeight - step * 2);
                    context.fillText(i, x - step / 2, cHeight + 10);
                } else {
                    context.lineTo(x, cHeight - step / 2);
                }
                context.font = '10px Calibri';

            }
            context.closePath();
            canvas.fillStroke(this);
        },
        stroke: 'black',
        strokeWidth: 1
    });
    layer.add(gauge);
    stage.add(layer);
</script>

<script src="bootstrap/assets/js/jquery.js"></script>
<script src="bootstrap/dist/js/bootstrap.min.js"></script>
<script src="timeline.js"></script>
<script src="arch-timeline.js"></script>
</body>
</html>
